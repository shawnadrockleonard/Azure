{
    "name": "resource-diagnostic-settings-la-policySet",
    "properties": {
        "type": "Microsoft.Authorization/policySetDefinitions",
        "name": "resource-diagnostic-settings-la-policySet",
        "displayName": "Apply diagnostic settings for applicable resources - Log Analytics",
        "description": "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace.",
        "metadata": {
            "category": "Monitoring"
        },
        "parameters": {
            "diagnosticsSettingNameToUse": {
            "type": "string",
                "metadata": {
                    "displayName": "Setting name",
                    "description": "Name of the policy for the diagnostics settings."
                },
                "defaultValue": "setByPolicyLA"
            },
            "logAnalytics": {
                "type": "string",
                "metadata": {
                    "displayName": "Log Analytics workspace",
                    "description": "Select the Log Analytics workspace from dropdown list",
                    "strongType": "omsWorkspace"
                }
            }
        },
        "policyDefinitions": [
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/aadds-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/aa-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/aci-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/acr-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/aks-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/analysisService-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/apiMgmt-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/appGw-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/bastion-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/batch-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/cdnEndpoints-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/cognitive-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/cosmosDBs-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/dataFactory-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/dlanalytics-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/dlstore-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/eventGridSub-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/eventGridTopic-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/eventHub-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/expressRoutes-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/firewall-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/hdInsight-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/iotHub-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/kv-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/lb-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/logicApps-integrationAccounts-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/logicApps-workflow-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/mySQL-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/nic-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/nsg-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/pip-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/postgreSQL-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/powerBIEmbedded-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/recoveryVault-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/redisCache-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/relay-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/searchServices-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/serviceBus-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/signalR-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/sql-mi-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/sqlDBs-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/sqlElasticPools-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/streamAnalytics-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/timeSeriesInsights-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/trafficManager-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/vnet-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/vnetGW-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/webServerFarm-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            },
            {
                "policyDefinitionId": "{policyLocationResourceId1}/providers/Microsoft.Authorization/policyDefinitions/website-diagnostic-settings-policyDef",
                "parameters": {
                    "diagnosticsSettingNameToUse":{
                        "value": "[parameters('diagnosticsSettingNameToUse')]"
                    },
                    "logAnalytics": {
                        "value": "[parameters('logAnalytics')]"
                    }
                }
            }
        ]
    }
}